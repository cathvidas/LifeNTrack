equestContext;e.forEach((function(e){if(e.telemetryProperties){var l=[];t.addDataFields(l,e.dataFields);var d=e.eventContract?e.eventContract.name:"";e.eventContract&&t.addDataFields(l,e.eventContract.dataFields),n.telemetry.sendTelemetryEvent(e.telemetryProperties,e.eventName,d,function(e){var t={costPriority:a.Normal,samplingPolicy:o.Measure,persistencePriority:s.Normal,dataCategories:u.NotSet,diagnosticLevel:c.FullEvent};return e.eventFlags&&e.eventFlags.dataCategories||f(i.Error,r.Core,(function(){return"Event is missing DataCategories event flag"})),e.eventFlags?(e.eventFlags.costPriority&&(t.costPriority=e.eventFlags.costPriority),e.eventFlags.samplingPolicy&&(t.samplingPolicy=e.eventFlags.samplingPolicy),e.eventFlags.persistencePriority&&(t.persistencePriority=e.eventFlags.persistencePriority),e.eventFlags.dataCategories&&(t.dataCategories=e.eventFlags.dataCategories),e.eventFlags.diagnosticLevel&&(t.diagnosticLevel=e.eventFlags.diagnosticLevel),t):t}(e),l)}})),this._sentFirstEvent?n.sync().catch((function(e){_(r.Sink,"RichApiError",e)})):(this._sentFirstEvent=!0,n.sync().then((function(){t._onSentFirstEvent&&t._onSentFirstEvent(!0)})).catch((function(){f(i.Info,r.Sink,(function(){return"Ri